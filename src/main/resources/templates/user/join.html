<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">

<head>
    <title>joinpage</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <style>
        h2 {
            border: 5px solid gray;
            display: inline;
            margin-top: 10px;
            padding-left: 10px;
            padding-right: 10px;
        }
        
        h1 {
            border-bottom: 5px solid gray;
        }
        
        .container {
            margin-top: 20px;
        }
        
        #doublecheck {
            padding-top: 8px;
        }
    </style>
    <script>
        function checkpw() {
            var pw11 = document.getElementById('pw1').value;
            var pw22 = document.getElementById('pw2').value;

            var char = ["!", "@", "#", "$", "%"];
            var eng = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
            var num = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];
            var check_char = 0;
            var check_eng = 0;
            var check_num = 0;


            if (pw11.length < 8) {
                document.getElementById('pw1warn').innerHTML = "숫자, 영문, 특수문자(!@#$%)포함 8자리 이상";
                document.getElementById('pw1warn').style.color = 'red';
            }

            for (var i = 0; i < char.length; i++) {
                if ((pw11.indexOf(char[i]) != -1)) {
                    check_char = 1;
                    break;

                }
            }
            if (check_char != 0) {
                for (var i = 0; i < eng.length; i++) {
                    if (pw11.indexOf(eng[i]) != -1) {
                        check_eng = 1;
                        break;
                    }
                }
            }
            if ((check_char != 0) && (check_eng != 0)) {
                for (var i = 0; i < eng.length; i++) {
                    if (pw11.indexOf(num[i]) != -1) {
                        check_char = 1;
                        break;
                    }
                }
            }

            if ((check_char == 0) || (check_eng == 0) || (check_num == 0)) {
                document.getElementById('pw1warn').innerHTML = "숫자, 영문, 특수문자(!@#$%)포함 8자리 이상";
                document.getElementById('pw1warn').style.color = 'red';
            }
        }

        function samePW() {
            if (document.getElementById('pw1').value != '' && document.getElementById('pw2').value != '') {
                if (document.getElementById('pw1').value == document.getElementById('pw2').value) {
                    document.getElementById('pw2warn').innerHTML = "비밀번호가 일치합니다.";
                    document.getElementById('pw2warn').style.color = 'green';
                } else {
                    document.getElementById('pw2warn').innerHTML = "비밀번호가 일치하지 않습니다.";
                    document.getElementById('pw2warn').style.color = 'red';
                }
            }

        }

        function checkblank() {
            if (document.getElementById('nameinput').value == '') {
                document.getElementById('warnname').innerHTML = "*필수항목 입니다.";
                document.getElementById('warnname').style.color = 'red';
            }
            if (document.getElementById('monthselect').value == '월' || document.getElementById('dayselect').value == '일' || document.getElementById('year').value == '') {
                document.getElementById('warnbirth').innerHTML = "*필수항목 입니다.";
                document.getElementById('warnbirth').style.color = 'red';
            }
            if (document.getElementById('phoneinput').value == '' || document.getElementById('dayselect').value == '') {
                document.getElementById('warnphone').innerHTML = "*필수항목 입니다.";
                document.getElementById('warnphone').style.color = 'red';
            }
            if (document.getElementById('mailinput').value == '' || document.getElementById('dayselect').value == '') {
                document.getElementById('warnmail').innerHTML = "*필수항목 입니다.";
                document.getElementById('warnmail').style.color = 'red';
            }


        }
    </script>
</head>

<body class="container">
    <h2>SHOPPING MALL</h2>
    <form th:action="@{/users}" th:object="${userForm}" accept-charset="utf-8" name="join" method="post">
        <div class="container text-center">
            <div class="row align-items-start">
                <div class="col-4">
                </div>
                <div class="col-md-3">
                    <h1>회원가입</h1>
                </div>

            </div>
        </div>

        <br><br>
        <div class="cols">
            <div class="row">
                <div class="col-4"></div>
                <div class="col-3">
                    <label for="idinput" class="form-label">아이디</label>
                    <input th:field="*{userId}" type="text" class="form-control" id="idinput" placeholder="영문 소문자, 숫자만 사용 가능">

                </div>
                <div class="col-2" id="doublecheck">
                    <br>
                    <button type="button" class="btn btn-outline-primary">중복확인</button>
                </div><br>
            </div>


            <div class="row">
                <div class="col-4"></div>
                <div class="col-3">
                    <br>
                    <label for="pwinput" class="form-label">비밀번호</label>
                    <input th:field="*{password}" type="password" class="form-control" id="pwinput" placeholder="숫자, 영문, 특수문자(!@#$)포함 8자리 이상">
                    <br>
                    <label for="checkpw" class="form-label">비밀번호 확인</label>
                    <input th:field="*{confirmPassword}" type="password" class="form-control" id="checkpw">
                    <br>
                    <label for="nameinput" class="form-label">이름</label>
                    <input th:field="*{userName}" type="text" class="form-control" id="nameinput">
                    <br>
                    <label for="birthinput" class="form-label">생년월일</label>
                </div>
            </div>
            <div class="row" id="birthinput">
                <div class="col-4"></div>
                <div class="col-1"><input type="text" class="form-control" placeholder="년(4자)"></div>
                <div class="col-1">

                    <select class="form-select">
                                <option selected>월</option>
                                <script>
                                    i=1;
                                    while(i<13){
                                        document.write('<option>'+i+'</option>');
                                    i=i+1;
                                    }
                                </script>
                                
                        </select>
                </div>
                <div class="col-1">
                    <select class="form-select">
                                <option selected>일</option>
                                <script>
                                    i=1;
                                    while(i<32){
                                        document.write('<option>'+i+'</option>');
                                    i=i+1;
                                    }
                                </script>

                                
                                </select>
                </div>
            </div>

            <!--
            <div class="row">
                <div class="col-4"></div>
                <div class="col-3">
                    <br>
                    <label for="phoneinput" class="form-label">휴대폰</label>
                    <input th:field="*{}"type="text" class="form-control" id="phoneinput" placeholder="(-없이 입력)">
                    <br>
                </div>
            </div>

            -->

            <div class="row">
                <div class="col-4"></div>
                <div class="col-2">
                    <label for="addnuminput" class="form-label">우편번호(선택) </label>
                    <input th:field="*{addressCode}" type="text" class="form-control" id="addnuminput">

                </div>
                <div class="col-2" id="doublecheck">
                    <br>
                    <a href="">
                        <button type="submit" class="btn btn-outline-primary">우편번호 찾기</button></a>
                </div><br>
            </div>
            <br>
            <div class="row">
                <div class="col-4"></div>
                <div class="col-3">
                    <label for="addinput" class="form-label">주소(선택) </label>
                    <div id="addinput">
                        <input th:field="*{address}" type="text" class="form-control" placeholder="주소">
                        <input th:field="*{addressDetails}" type="text" class="form-control" placeholder="상세주소">
                        <br></div>

                    <label for="mailinputWrapper" class="form-label">이메일 </label>
                </div>
            </div>

            <div class="row" id="mailinputWrapper">
                <div class="col-4"></div>
                <div class="col-2"><input id="emailInput" type="text" class="form-control" placeholder="이메일"></div>
                <div class="col-2">
                    <select class="form-select" onchange="addHiddenInput(this)">
                        <option selected>직접입력</option>
                        <option value = "@naver.com">@naver.com</option>
                        <option value = "@gmail.com">@gmail.com</option>
                        <option value = "@hanmail.net">@hanmail.net</option>
                        <option value = "@kakao.com">@kakao.com</option>
                        <option value = "@nate.com" >@nate.com</option>
                    </select>
                </div>
            </div>
            <br><br>
            <!--
            <div class="row">
                <div class="col-4"></div>
                <div class="col">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" th:field="" id="agreeform">
                        <label class="form-check-label" for="agreeform">
               광고 SMS 및 메일 수신 동의 (선택)
            </label>
                        <br>
                    </div>
                </div>
            </div>
             -->
            <br><br><br><br>
            <div class="row">
                <div class="col-5"></div>
                <div class="col-5">
                        <button type="submit" class="btn btn-outline-primary">가입하기</button>
                </div><br>
            </div>

        </div>
    </form>
    <br><br><br>

    <script>
        function addHiddenInput(selectElem) {
            let findHiddenInput = document.getElementById("emailHiddenInput");
            if( findHiddenInput != null ) {
                findHiddenInput.remove();
            }
            let hiddenInput = document.createElement("input");
            let emailInput = document.getElementById("emailInput");
            var emailFront = emailInput.value;
            var emailBack = selectElem.value;
            hiddenInput.setAttribute("name",emailFront+emailBack);
            hiddenInput.setAttribute("id","emailHiddenInput");
        }
    </script>
</body>

</html>

